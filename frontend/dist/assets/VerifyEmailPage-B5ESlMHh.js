import{r,j as e}from"./radix-ui-g4Zjb45b.js";import{u as b,C as h,c as f,B as p,A as g,a as w,b as k,e as C,L as S,M as E,I as A,v as L}from"./index-Di0QTi5H.js";import{A as F,a as V}from"./alert-8JZEACBP.js";import{m as i}from"./animations-Cl6lmbPg.js";import{C as D}from"./circle-check-Bt4IzOAM.js";import{C as P}from"./circle-x-DRdwssQI.js";import{L as B}from"./loader-circle-tVcG7Y-8.js";import{a as I,c as M,L as n}from"./vendor-5D3NlFB3.js";function z(){const o=I(),[d]=M(),{verifyEmail:j,isLoading:m}=b(),[l,x]=r.useState(""),[t,a]=r.useState("idle"),[y,c]=r.useState("");r.useEffect(()=>{const s=d.get("token");s&&(x(s),u(s))},[d]);const u=async s=>{if(s){a("verifying"),c("");try{await j(s)?a("success"):(a("error"),c("The verification link is invalid or has expired."))}catch{a("error"),c("An error occurred during verification. Please try again.")}}},N=s=>{s.preventDefault(),u(l)};return t==="success"?e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:e.jsxs(n,{to:"/",className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"S"})}),e.jsx("span",{className:"text-xl font-bold text-foreground",children:"Sovereon"})]})}),e.jsx(i.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},children:e.jsx(h,{className:"border-border/50 shadow-xl shadow-black/5",children:e.jsxs(f,{className:"pt-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-full bg-green-500/10 flex items-center justify-center mx-auto mb-4",children:e.jsx(D,{className:"h-8 w-8 text-green-500"})}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Email Verified!"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Your email has been successfully verified. You can now sign in to your account."}),e.jsxs(p,{onClick:()=>o("/auth/login?verified=true"),className:"w-full",children:["Sign In",e.jsx(g,{className:"ml-2 h-4 w-4"})]})]})})})]})}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsx(i.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:e.jsxs(n,{to:"/",className:"inline-flex items-center gap-2",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg bg-gradient-to-br from-blue-600 to-purple-600 flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-lg",children:"S"})}),e.jsx("span",{className:"text-xl font-bold text-foreground",children:"Sovereon"})]})}),e.jsx(i.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1},children:e.jsxs(h,{className:"border-border/50 shadow-xl shadow-black/5",children:[e.jsxs(w,{className:"space-y-1",children:[e.jsx(k,{className:"text-2xl font-bold text-center",children:"Verify your email"}),e.jsx(C,{className:"text-center",children:"Enter the verification token from your email"})]}),e.jsxs(f,{className:"space-y-4",children:[t==="error"&&e.jsxs(F,{variant:"destructive",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx(V,{children:y})]}),e.jsxs("form",{onSubmit:N,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(S,{htmlFor:"token",children:"Verification Token"}),e.jsxs("div",{className:"relative",children:[e.jsx(E,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(A,{id:"token",type:"text",placeholder:"Enter your verification token",value:l,onChange:s=>x(s.target.value),className:"pl-10",disabled:m||t==="verifying"})]}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["For demo: Check sessionStorage for your verification token with key: ",e.jsx("code",{className:"text-xs bg-muted px-1 py-0.5 rounded",children:"verify_your@email.com"})]})]}),e.jsx(p,{type:"submit",className:"w-full",disabled:m||t==="verifying"||!l,children:t==="verifying"?e.jsxs(e.Fragment,{children:[e.jsx(B,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):e.jsxs(e.Fragment,{children:["Verify Email",e.jsx(g,{className:"ml-2 h-4 w-4"})]})})]})]}),e.jsxs(L,{className:"flex flex-col space-y-4",children:[e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Already verified?"," ",e.jsx(n,{to:"/auth/login",className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Sign in"})]}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Didn't receive the email?"," ",e.jsx("button",{onClick:()=>o("/auth/register"),className:"text-primary hover:text-primary/80 font-medium transition-colors",children:"Register again"})]}),e.jsx(n,{to:"/",className:"text-center text-sm text-muted-foreground hover:text-foreground transition-colors",children:"‚Üê Back to homepage"})]})]})})]})})}export{z as default};
