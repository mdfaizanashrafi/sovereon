import{r,j as e}from"./radix-ui-g4Zjb45b.js";import{u as T,B as m,P as f,I as A,S as k,h as F,i as I,j as B,k as c,C as P,a as V,b as D,e as E,c as _,f as H,A as R,g as Q}from"./index-Di0QTi5H.js";import{S as x}from"./skeleton-CqUGqSWy.js";import{T as $,a as z,b as v,c as i,d as M,e as n}from"./table-ihiM_VI7.js";import{m as d}from"./animations-Cl6lmbPg.js";import{S as U}from"./search-CWwYuJ_w.js";import{F as X}from"./funnel-CMdua-DV.js";import{C as Y}from"./circle-x-DRdwssQI.js";import{L as q}from"./loader-circle-tVcG7Y-8.js";import{C as G}from"./circle-check-Bt4IzOAM.js";import{L as u}from"./vendor-5D3NlFB3.js";const J={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},j={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};function ce(){const{getOrders:g}=T(),[o,N]=r.useState([]),[h,p]=r.useState([]),[w,b]=r.useState(!0),[t,C]=r.useState(""),[l,S]=r.useState("all");r.useEffect(()=>{(async()=>{const a=await g();N(a),p(a),b(!1)})()},[g]),r.useEffect(()=>{let s=o;t&&(s=s.filter(a=>a.service.toLowerCase().includes(t.toLowerCase())||a.orderNumber.toLowerCase().includes(t.toLowerCase())||a.description.toLowerCase().includes(t.toLowerCase()))),l!=="all"&&(s=s.filter(a=>a.status===l)),p(s)},[t,l,o]);const y=s=>{switch(s){case"completed":return"bg-green-500/10 text-green-600 border-green-500/20";case"in_progress":return"bg-blue-500/10 text-blue-600 border-blue-500/20";case"pending":return"bg-yellow-500/10 text-yellow-600 border-yellow-500/20";case"cancelled":return"bg-red-500/10 text-red-600 border-red-500/20";default:return"bg-muted text-muted-foreground"}},L=s=>{switch(s){case"completed":return e.jsx(G,{className:"h-3 w-3"});case"in_progress":return e.jsx(q,{className:"h-3 w-3 animate-spin"});case"pending":return e.jsx(Q,{className:"h-3 w-3"});case"cancelled":return e.jsx(Y,{className:"h-3 w-3"});default:return null}},O=s=>s.split("_").map(a=>a.charAt(0).toUpperCase()+a.slice(1)).join(" ");return w?e.jsxs("div",{className:"space-y-6",children:[e.jsx(x,{className:"h-8 w-48"}),e.jsx(x,{className:"h-12"}),e.jsx(x,{className:"h-96"})]}):e.jsxs(d.div,{variants:J,initial:"hidden",animate:"visible",className:"space-y-6",children:[e.jsxs(d.div,{variants:j,className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Orders"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage and track your service orders"})]}),e.jsx(m,{asChild:!0,children:e.jsxs(u,{to:"/services",children:[e.jsx(f,{className:"mr-2 h-4 w-4"}),"New Order"]})})]}),e.jsxs(d.div,{variants:j,className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(U,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(A,{placeholder:"Search orders...",value:t,onChange:s=>C(s.target.value),className:"pl-10"})]}),e.jsxs(k,{value:l,onValueChange:S,children:[e.jsxs(F,{className:"w-full sm:w-40",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),e.jsx(I,{placeholder:"Filter by status"})]}),e.jsxs(B,{children:[e.jsx(c,{value:"all",children:"All Status"}),e.jsx(c,{value:"pending",children:"Pending"}),e.jsx(c,{value:"in_progress",children:"In Progress"}),e.jsx(c,{value:"completed",children:"Completed"}),e.jsx(c,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsx(d.div,{variants:j,children:e.jsxs(P,{children:[e.jsxs(V,{children:[e.jsx(D,{children:"All Orders"}),e.jsxs(E,{children:["Showing ",h.length," of ",o.length," orders"]})]}),e.jsx(_,{children:h.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs($,{children:[e.jsx(z,{children:e.jsxs(v,{children:[e.jsx(i,{children:"Order"}),e.jsx(i,{children:"Service"}),e.jsx(i,{children:"Status"}),e.jsx(i,{children:"Amount"}),e.jsx(i,{children:"Date"}),e.jsx(i,{className:"text-right",children:"Action"})]})}),e.jsx(M,{children:h.map(s=>e.jsxs(v,{children:[e.jsx(n,{className:"font-medium",children:s.orderNumber}),e.jsx(n,{children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium",children:s.service}),e.jsx("p",{className:"text-xs text-muted-foreground line-clamp-1",children:s.description})]})}),e.jsx(n,{children:e.jsx(H,{variant:"outline",className:y(s.status),children:e.jsxs("span",{className:"flex items-center gap-1",children:[L(s.status),O(s.status)]})})}),e.jsxs(n,{children:["$",s.amount.toLocaleString()]}),e.jsx(n,{children:new Date(s.createdAt).toLocaleDateString()}),e.jsx(n,{className:"text-right",children:e.jsx(m,{variant:"ghost",size:"sm",asChild:!0,children:e.jsxs(u,{to:`/portal/orders/${s.id}`,children:["View",e.jsx(R,{className:"ml-2 h-4 w-4"})]})})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(f,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No orders found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:t||l!=="all"?"Try adjusting your search or filters":"You haven't placed any orders yet"}),!t&&l==="all"&&e.jsx(m,{asChild:!0,children:e.jsx(u,{to:"/services",children:"Browse Services"})})]})})]})})]})}export{ce as default};
