import{j as e,f as E,i as Q,g as U,h as M,G as X,H as q,k as G,O as Y,r as d}from"./radix-ui-g4Zjb45b.js";import{n as J,l as j,X as K,u as W,C as g,a as f,b as p,c as N,g as P,I as Z,S as ee,h as se,d as te,i as ae,j as le,k as h,e as re,f as k,B as C,R as ne}from"./index-Di0QTi5H.js";import{S as v}from"./skeleton-CqUGqSWy.js";import{T as A,a as $,b,c as n,d as z,e as i}from"./table-ihiM_VI7.js";import{m as u}from"./animations-Cl6lmbPg.js";import{C as O}from"./circle-check-Bt4IzOAM.js";import{C as F}from"./circle-alert-KNhF9Ogk.js";import{S as ie}from"./search-CWwYuJ_w.js";import{F as de}from"./file-text-WnYhoQF0.js";import{D as ce}from"./dollar-sign-CS8PsEW6.js";import{C as oe}from"./circle-x-DRdwssQI.js";import"./vendor-5D3NlFB3.js";const xe=[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]],me=J("download",xe);function he({...t}){return e.jsx(E,{"data-slot":"dialog",...t})}function ue({...t}){return e.jsx(Q,{"data-slot":"dialog-trigger",...t})}function je({...t}){return e.jsx(G,{"data-slot":"dialog-portal",...t})}function ge({className:t,...a}){return e.jsx(Y,{"data-slot":"dialog-overlay",className:j("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",t),...a})}function fe({className:t,children:a,showCloseButton:w=!0,...c}){return e.jsxs(je,{"data-slot":"dialog-portal",children:[e.jsx(ge,{}),e.jsxs(U,{"data-slot":"dialog-content",className:j("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 outline-none sm:max-w-lg",t),...c,children:[a,w&&e.jsxs(M,{"data-slot":"dialog-close",className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[e.jsx(K,{}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function pe({className:t,...a}){return e.jsx("div",{"data-slot":"dialog-header",className:j("flex flex-col gap-2 text-center sm:text-left",t),...a})}function Ne({className:t,...a}){return e.jsx(X,{"data-slot":"dialog-title",className:j("text-lg leading-none font-semibold",t),...a})}function ve({className:t,...a}){return e.jsx(q,{"data-slot":"dialog-description",className:j("text-muted-foreground text-sm",t),...a})}const be={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1}}},y={hidden:{opacity:0,y:20},visible:{opacity:1,y:0}};function ze(){const{getInvoices:t}=W(),[a,w]=d.useState([]),[c,T]=d.useState([]),[H,V]=d.useState(!0),[o,_]=d.useState(""),[x,R]=d.useState("all");d.useEffect(()=>{(async()=>{const l=await t();w(l),T(l),V(!1)})()},[t]),d.useEffect(()=>{let s=a;o&&(s=s.filter(l=>l.invoiceNumber.toLowerCase().includes(o.toLowerCase()))),x!=="all"&&(s=s.filter(l=>l.status===x)),T(s)},[o,x,a]);const L=s=>{switch(s){case"paid":return"bg-green-500/10 text-green-600 border-green-500/20";case"pending":return"bg-yellow-500/10 text-yellow-600 border-yellow-500/20";case"overdue":return"bg-red-500/10 text-red-600 border-red-500/20";case"cancelled":return"bg-gray-500/10 text-gray-600 border-gray-500/20";default:return"bg-muted text-muted-foreground"}},I=s=>{switch(s){case"paid":return e.jsx(O,{className:"h-3 w-3"});case"pending":return e.jsx(P,{className:"h-3 w-3"});case"overdue":return e.jsx(F,{className:"h-3 w-3"});case"cancelled":return e.jsx(oe,{className:"h-3 w-3"});default:return null}},B=()=>{const s=a.filter(r=>r.status==="paid").reduce((r,m)=>r+m.total,0),l=a.filter(r=>r.status==="pending").reduce((r,m)=>r+m.total,0),D=a.filter(r=>r.status==="overdue").reduce((r,m)=>r+m.total,0);return{totalPaid:s,totalPending:l,totalOverdue:D}};if(H)return e.jsxs("div",{className:"space-y-6",children:[e.jsx(v,{className:"h-8 w-48"}),e.jsx("div",{className:"grid gap-4 md:grid-cols-3",children:[...Array(3)].map((s,l)=>e.jsx(v,{className:"h-24"},l))}),e.jsx(v,{className:"h-12"}),e.jsx(v,{className:"h-96"})]});const S=B();return e.jsxs(u.div,{variants:be,initial:"hidden",animate:"visible",className:"space-y-6",children:[e.jsxs(u.div,{variants:y,children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Invoices"}),e.jsx("p",{className:"text-muted-foreground",children:"View and manage your billing history"})]}),e.jsxs(u.div,{variants:y,className:"grid gap-4 md:grid-cols-3",children:[e.jsxs(g,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Total Paid"}),e.jsx(O,{className:"h-4 w-4 text-green-500"})]}),e.jsx(N,{children:e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["$",S.totalPaid.toLocaleString()]})})]}),e.jsxs(g,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Pending"}),e.jsx(P,{className:"h-4 w-4 text-yellow-500"})]}),e.jsx(N,{children:e.jsxs("div",{className:"text-2xl font-bold text-yellow-600",children:["$",S.totalPending.toLocaleString()]})})]}),e.jsxs(g,{children:[e.jsxs(f,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(p,{className:"text-sm font-medium",children:"Overdue"}),e.jsx(F,{className:"h-4 w-4 text-red-500"})]}),e.jsx(N,{children:e.jsxs("div",{className:"text-2xl font-bold text-red-600",children:["$",S.totalOverdue.toLocaleString()]})})]})]}),e.jsxs(u.div,{variants:y,className:"flex flex-col sm:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Z,{placeholder:"Search invoices...",value:o,onChange:s=>_(s.target.value),className:"pl-10"})]}),e.jsxs(ee,{value:x,onValueChange:R,children:[e.jsxs(se,{className:"w-full sm:w-40",children:[e.jsx(te,{className:"mr-2 h-4 w-4"}),e.jsx(ae,{placeholder:"Filter by status"})]}),e.jsxs(le,{children:[e.jsx(h,{value:"all",children:"All Status"}),e.jsx(h,{value:"paid",children:"Paid"}),e.jsx(h,{value:"pending",children:"Pending"}),e.jsx(h,{value:"overdue",children:"Overdue"}),e.jsx(h,{value:"cancelled",children:"Cancelled"})]})]})]}),e.jsx(u.div,{variants:y,children:e.jsxs(g,{children:[e.jsxs(f,{children:[e.jsx(p,{children:"All Invoices"}),e.jsxs(re,{children:["Showing ",c.length," of ",a.length," invoices"]})]}),e.jsx(N,{children:c.length>0?e.jsx("div",{className:"overflow-x-auto",children:e.jsxs(A,{children:[e.jsx($,{children:e.jsxs(b,{children:[e.jsx(n,{children:"Invoice"}),e.jsx(n,{children:"Date"}),e.jsx(n,{children:"Due Date"}),e.jsx(n,{children:"Status"}),e.jsx(n,{children:"Amount"}),e.jsx(n,{className:"text-right",children:"Actions"})]})}),e.jsx(z,{children:c.map(s=>e.jsxs(b,{children:[e.jsx(i,{className:"font-medium",children:s.invoiceNumber}),e.jsx(i,{children:new Date(s.issuedAt).toLocaleDateString()}),e.jsx(i,{children:new Date(s.dueDate).toLocaleDateString()}),e.jsx(i,{children:e.jsx(k,{variant:"outline",className:L(s.status),children:e.jsxs("span",{className:"flex items-center gap-1",children:[I(s.status),s.status.charAt(0).toUpperCase()+s.status.slice(1)]})})}),e.jsxs(i,{children:["$",s.total.toLocaleString()]}),e.jsx(i,{className:"text-right",children:e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsxs(he,{children:[e.jsx(ue,{asChild:!0,children:e.jsx(C,{variant:"ghost",size:"sm",children:e.jsx(de,{className:"h-4 w-4"})})}),e.jsxs(fe,{className:"max-w-2xl",children:[e.jsxs(pe,{children:[e.jsx(Ne,{children:"Invoice Details"}),e.jsx(ve,{children:s.invoiceNumber})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Status"}),e.jsxs(k,{variant:"outline",className:L(s.status),children:[I(s.status),e.jsx("span",{className:"ml-1",children:s.status.charAt(0).toUpperCase()+s.status.slice(1)})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsxs("p",{className:"text-2xl font-bold",children:["$",s.total.toLocaleString()]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Issued Date"}),e.jsx("p",{className:"font-medium",children:new Date(s.issuedAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Due Date"}),e.jsx("p",{className:"font-medium",children:new Date(s.dueDate).toLocaleDateString()})]})]}),s.paidAt&&e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Paid Date"}),e.jsx("p",{className:"font-medium",children:new Date(s.paidAt).toLocaleDateString()})]}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium mb-2",children:"Items"}),e.jsxs(A,{children:[e.jsx($,{children:e.jsxs(b,{children:[e.jsx(n,{children:"Description"}),e.jsx(n,{className:"text-right",children:"Qty"}),e.jsx(n,{className:"text-right",children:"Unit Price"}),e.jsx(n,{className:"text-right",children:"Total"})]})}),e.jsx(z,{children:s.items.map((l,D)=>e.jsxs(b,{children:[e.jsx(i,{children:l.description}),e.jsx(i,{className:"text-right",children:l.quantity}),e.jsxs(i,{className:"text-right",children:["$",l.unitPrice.toLocaleString()]}),e.jsxs(i,{className:"text-right",children:["$",l.total.toLocaleString()]})]},D))})]})]}),e.jsxs("div",{className:"flex justify-between pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Subtotal"}),e.jsxs("p",{className:"font-medium",children:["$",s.amount.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Tax"}),e.jsxs("p",{className:"font-medium",children:["$",s.tax.toLocaleString()]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsxs("p",{className:"text-xl font-bold",children:["$",s.total.toLocaleString()]})]})]})]})]})]}),e.jsx(C,{variant:"ghost",size:"sm",children:e.jsx(me,{className:"h-4 w-4"})}),s.status==="pending"&&e.jsxs(C,{size:"sm",children:[e.jsx(ce,{className:"h-4 w-4 mr-1"}),"Pay"]})]})})]},s.id))})]})}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(ne,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground opacity-50"}),e.jsx("h3",{className:"text-lg font-medium mb-2",children:"No invoices found"}),e.jsx("p",{className:"text-muted-foreground",children:o||x!=="all"?"Try adjusting your search or filters":"You don't have any invoices yet"})]})})]})})]})}export{ze as default};
